<!DOCTYPE html>
<html>
    <head>
        <title>
            Register
        </title>
    </head>

    <body>
        <div class="register">
            <h1>Register</h1>
            <form action="javascript:register()">
                <label for="email">
                    Email:
                </label>
                <input type="text" name="name" id="name" 
                placeholder="Enter your name" required autocomplete="off"/>
                <label for="password">
                <input type="text" name="email" id="email" 
                placeholder="Enter your email" required autocomplete="off"/>
                <label for="password">
                    Password:
                </label>
                <input type="password" name="password" id="password" 
                placeholder="Enter your password" required autocomplete="off"/>
                <button>Sign up</button>
            </form> 
            <!-- <div class="wrap">
                <button type="submit" onclick="login(document.getElementById('email').value, document.getElementById('password').value)">
                    Sign in
                </button>
            </div>   -->
            <p>Not registered?
                <a href="#" style="text-decoration: none;">
                    Create an account
                </a>
            </p>   
        </div>
        <script>
            function register() {
                const obj = {
                    "name": document.getElementById('name').value,
                    "email": document.getElementById('email').value,
                    "password": document.getElementById('password').value
                }
                fetch('http://localhost:8000/api/v1/users', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(obj)
                })
                .then(response => response.json())
                .then(response => {
                        if (response.msg == "Created") {
                            window.location.href = "/";
                        } else {
                            alert("Something happened wrong")
                        }
                    }
                )
            }
        </script>
    </body>
</html>